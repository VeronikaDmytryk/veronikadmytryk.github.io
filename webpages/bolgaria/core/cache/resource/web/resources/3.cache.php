<?php  return array (
  'resourceClass' => 'modDocument',
  'resource' => 
  array (
    'id' => 3,
    'type' => 'document',
    'contentType' => 'text/html',
    'pagetitle' => 'О компании',
    'longtitle' => 'О компании',
    'description' => 'Наша команда профессионалов поможет Вам собрать все неоходимые документы для быстрого и безболезненного переезда в Болгарию.',
    'alias' => 'about',
    'link_attributes' => '',
    'published' => 1,
    'pub_date' => 0,
    'unpub_date' => 0,
    'parent' => 0,
    'isfolder' => 0,
    'introtext' => '',
    'content' => '',
    'richtext' => 1,
    'template' => 4,
    'menuindex' => 2,
    'searchable' => 1,
    'cacheable' => 1,
    'createdby' => 1,
    'createdon' => 1493239421,
    'editedby' => 1,
    'editedon' => 1493447163,
    'deleted' => 0,
    'deletedon' => 0,
    'deletedby' => 0,
    'publishedon' => 1493240940,
    'publishedby' => 1,
    'menutitle' => '',
    'donthit' => 0,
    'privateweb' => 0,
    'privatemgr' => 0,
    'content_dispo' => 0,
    'hidemenu' => 0,
    'class_key' => 'modDocument',
    'context_key' => 'web',
    'content_type' => 1,
    'uri' => 'about',
    'uri_override' => 0,
    'hide_children_in_tree' => 0,
    'show_in_tree' => 1,
    'properties' => NULL,
    'phone_1' => 
    array (
      0 => 'phone_1',
      1 => '+7 (495) 12-321-345',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'phone_2' => 
    array (
      0 => 'phone_2',
      1 => '+7 (495) 12-321-346',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    '_content' => '<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>О компании - COMPASS</title>
		<link href="assets/templates/bolgaria/css/fonts.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href="assets/templates/bolgaria/css/jquery-ui.min.css" rel="stylesheet" >
		<link rel="stylesheet" type="text/css" href="assets/templates/bolgaria/css/slick.css"/>
		<link href="assets/templates/bolgaria/css/main.css" rel="stylesheet">
		<link href="assets/templates/bolgaria/css/media.css" rel="stylesheet">
	</head>
	<body>
		<header class="cheader">
			<div class="header">
	<div class="container">
		<div class="row">
			<div class="col-md-2 col-sm-4 col-xs-4">
				<div class="logo"></div>
			</div>
			<div class="col-md-7 hidden-xs hidden-sm">
				<nav>
				    <ul class="menu clearfix"><li class="first"><a href="http://bolgaria.veronikadmytryk.net/" title="Главная" >Главная</a></li>
<li><a href="contacts" title="Контакты" >Контакты</a></li>
<li class="active"><a href="about" title="О компании" >О компании</a></li>
<li class="last"><a href="move" title="Недвижимость и переезд" >Недвижимость и переезд</a></li>
</ul>

					<!--<ul class="menu clearfix"> 
						<li class="menu__item"> 
							<a href="index.html">Главная</a> 
						</li> 
						<li class="menu__item"> 
							<a href="about.html">О компании</a> 
						</li> 
						<li class="menu__item"> 
							<a href="move.html">Переезд в Болгарию</a> 
						</li> 
						<li class="menu__item"> 
							<a href="">Открытие представительства</a> 
						</li> 
					<li class="menu__item"> 
							<a href="contacts.html">Контакты</a> 
						</li> 
					</ul> -->
				</nav>
			</div>
			<div class="col-md-3 col-sm-8 col-xs-8 pull-right">
				<div class="menu__icon pull-right" id="humburger">
					<i class="fa fa-bars"></i>
				</div>
				<div class="phones clearfix">
					<div class="pull-right">
					+7 (495) 12-321-345<br>
    				+7 (495) 12-321-346
					</div>
					<div class="phone__icon pull-right" data-toggle="modal" data-target="#myModal"></div>
				</div>
			</div>
		</div>
	</div>
	<nav class="menu__dropdown hided">
	    <ul class="menu__dropdown_block"><li class="first"><a href="http://bolgaria.veronikadmytryk.net/" title="Главная" >Главная</a></li>
<li><a href="contacts" title="Контакты" >Контакты</a></li>
<li class="active"><a href="about" title="О компании" >О компании</a></li>
<li class="last"><a href="move" title="Недвижимость и переезд" >Недвижимость и переезд</a></li>
</ul>
		<!--<ul class="menu__dropdown_block clearfix">-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="index.html">Главная</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="about.html">О компании</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="move.html">Переезд в Болгарию</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="">Открытие представительства</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="contacts.html">Контакты</a>-->
		<!--	</li>-->
		<!--</ul>-->
	</nav>
</div>
			<div class="container">
				<div class="header__subtitle text-center">О компании
				</div>
				<a href="#info" class="header__arrow_small">
					<i  class="fa fa-angle-down"></i>
				</a>
			</div>
		</header>
		<section id="info" class="greybackground">
			<div class="container">
				<div class="col-md-12 col-xs-12">
					<div class="about text-center">
						<h3 class="about__text text-center" ><strong>Надежность и достоверность</strong> - главные принципы нашей работы. Мы всегда готовы ответить на самые сложные и неоднозначные вопросы о переезде в Болгарию, помочь со всеми
формальностями и принять верное решение!</h3>
						<div class="row">
							<div class="about__slogan clearfix">
								<div class="col-md-4 col-sm-4 col-xs-12">
									<div class="about__slogan_1 pull-right">
										<span>Десятки</span>
										довольных клиентов
									</div>
								</div>
								<div class="col-md-4 col-sm-4 col-xs-12">
									<div class="about__slogan_2">
										Уже обрели
									</div>
								</div>
								<div class="col-md-4 col-sm-4 col-xs-12">
									<div class="about__slogan_3 pull-left">
										<span>Новый дом</span> В Болгарии
									</div>
								</div>
							</div>
						</div>
						<div class="bluestrip">
							<div class="row">
								<div class="col-md-4 col-md-offset-4 col-xs-8 col-xs-offset-2">
									<div class="bluestrip__text">
										А вы готовы?
									</div>
								</div>
							</div>
						</div>
						<h2 class="about__title">
							Управляющие партнеры
						</h2>
						<div class="row">
							<div class="bio">
								<div class="col-md-6 col-sm-6  col-xs-12 pull-left">
									<div class="bio__block_1">
										<div class="bio__photo_1"></div>
										<h3 class="bio__title">Игорь Ковалев</h3>
										<p class="bio__text">Переезд в другую страну всегда сопряжен с рисками, особенно если Вы переезжаете всей семьей. Необходимо позаботиться - в какой детский сад будут хоть ваши дети, какую школу посещать, как получить медицинскую помощь вашим родителям и какой бизнес вы сможете открыть на новом месте жительства. Мы поможем Вам разобраться во всех деталях, а вам останется только наслаждаться новым уровнем жизни! :)</p>
									</div>		
								</div>
								<div class="col-md-6 col-sm-6 col-xs-12 pull-right">
									<div class="bio__block_2">
										<div class="bio__photo_2"></div>
										<h3 class="bio__title">Виктор Петров</h3>
										<p class="bio__text">Я на своем опыте убедился сколько сложностей возникает при переезде в другую страну. Сколько нюансов нужно узнать и учесть, что легально переехать на ВНЖ. Но скажу точно - это того стоит! Каждое утро я вижу Солнечный берег и Вам готов помочь в переезде в Болгарию. В добрый путь!</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		
		<div class="gal-item">
    <a href="/assets/gallery/1/11.png" title="circle3.png"  rel="lightbox">

        <img class="[[+imgCls]]" src="/assets/components/gallery/connector.php?action=web/phpthumb&amp;ctx=web&amp;w=400&amp;h=400&amp;zc=1&amp;far=C&amp;q=90&amp;src=%2Fassets%2Fgallery%2F1%2F11.png" alt="circle3.png"  />
    </a>
</div>
<div class="gal-item">
    <a href="/assets/gallery/1/13.png" title="circle1.png"  rel="lightbox">

        <img class="[[+imgCls]]" src="/assets/components/gallery/connector.php?action=web/phpthumb&amp;ctx=web&amp;w=400&amp;h=400&amp;zc=1&amp;far=C&amp;q=90&amp;src=%2Fassets%2Fgallery%2F1%2F13.png" alt="circle1.png"  />
    </a>
</div>
<div class="gal-item">
    <a href="/assets/gallery/1/12.png" title="circle2.png"  rel="lightbox">

        <img class="[[+imgCls]]" src="/assets/components/gallery/connector.php?action=web/phpthumb&amp;ctx=web&amp;w=400&amp;h=400&amp;zc=1&amp;far=C&amp;q=90&amp;src=%2Fassets%2Fgallery%2F1%2F12.png" alt="circle2.png"  />
    </a>
</div>
<div class="gal-item">
    <a href="/assets/gallery/1/14.png" title="logo-footer.png"  rel="lightbox">

        <img class="[[+imgCls]]" src="/assets/components/gallery/connector.php?action=web/phpthumb&amp;ctx=web&amp;w=400&amp;h=400&amp;zc=1&amp;far=C&amp;q=90&amp;src=%2Fassets%2Fgallery%2F1%2F14.png" alt="logo-footer.png"  />
    </a>
</div>
		
		<section class="contact text-center">
			<div class="container">
				<h2 class="section__title">Есть вопросы<br>по переезду в Болгарию?</h2>
				<div class="row">
					<div class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 ">
						<div class="contact__slogan">Мы проконсультируем Вас бесплатно!</div>
						<div class="header__arrow contact__arrow">
							<i class="fa fa-angle-down"></i>
						</div>
						<form action="success.php" class="js-form" id="popupResult">
							<p><input type="text" placeholder="ИМЯ" name="name" required></p>
							<p><input type="email" placeholder="E-MAIL" name="email" required></p>
							<p><input type="tel" placeholder="ТЕЛЕФОН" name="tel" required ></p>
							<button type="submit" data-submit>Заказать консультацию</button>
						</form>
					</div>
				</div>
			</div>
			<div id="loader">
				<img src="assets/templates/bolgaria/img/ripple.svg">
			</div>
			<div id="overlay">
	    		<div id="thx">
	    			Спасибо! Мы обязательно вам перезвоним в течении 24 часов.
	    		</div>
		   	</div>
		</section>
		<footer>
	<div class="container">
		<div class="row">
			<div class="col-md-3 col-sm-4 col-xs-4">
				<div class="footer__logo"></div>
			</div>
			<div class="col-md-3 col-sm-4 col-xs-8">
				<div class="confidentials">2016 / Все права защищены</div>    
			</div>
			<div class="col-md-3 col-sm-4 hidden-xs">
				<div class="terms"><a href="#" class="footer__link">Политика конфиденциальности</a></div>
			</div>
			<div class="col-md-3 hidden-sm hidden-xs pull-right">
				<div class="phones clearfix">
					<div class="pull-right">
					+7 (495) 12-321-345<br>
					+7 (495) 12-321-346
					</div>
					<div class="phone__icon pull-right"></div>
				</div>
		</div>
		</div>
	</div>
</footer>

		<div id="myModal" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<section class="contact text-center">
			<h2 class="section__title">Есть вопросы<br>по переезду в Болгарию?</h2>
				<div class="contact__slogan">Мы проконсультируем Вас бесплатно!</div>
				<div class="header__arrow contact__arrow">
					<i class="fa fa-angle-down"></i>
				</div>
				<form action="success.php" class="js-form" id="popupResult">
					<p><input type="text" placeholder="ИМЯ" name="name" required autofocus></p>
					<p><input type="email" placeholder="E-MAIL" name="email" required></p>
					<p><input type="tel" placeholder="ТЕЛЕФОН" name="tel" required ></p>
					<button type="submit" data-submit>Заказать консультацию</button>
				</form>
		</section>
	</div>
	<div id="loader">
		<img src="assets/templates/bolgaria/img/ripple.svg">
	</div>
	
	<div id="overlay">
		<div id="thx">
			Спасибо! Мы обязательно вам перезвоним в течении 24 часов.
		</div>
   	</div>
</div>

		<script src="https://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script>
		<!-- Подключен файл-валидатор, для проверки формы на заполненность  -->
		<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.js"></script>
		<script src="assets/templates/bolgaria/js/jquery-ui.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<script src="assets/templates/bolgaria/js/slick.min.js"></script>
		<script src="assets/templates/bolgaria/js/main.js"></script>
	</body>
</html>',
    '_isForward' => false,
    '_sjscripts' => 
    array (
      0 => '<!-- This site is optimized with the Sterc seoPro plugin 1.0.4 - http://www.sterc.nl/modx/seopro -->',
      1 => '<link rel="stylesheet" href="/assets/components/gallery/packages/slimbox/css/slimbox2.css" type="text/css" />',
    ),
    '_jscripts' => 
    array (
      0 => '<script type="text/javascript" src="/assets/components/gallery/packages/slimbox/js/slimbox2.js"></script>',
      1 => '<script type="text/javascript">
if (!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)) {
	jQuery(function($) {
	    var opts = {"loop":false,"overlayOpacity":0.8,"overlayFadeDuration":400,"resizeDuration":400,"resizeEasing":"swing","initialWidth":250,"initialHeight":250,"imageFadeDuration":400,"captionAnimationDuration":400,"counterText":"Image {x} of {y}","album":"\\u0411\\u043e\\u043b\\u0433\\u0430\\u0440\\u0438\\u044f","tag":"","plugin":"slimbox","pluginPath":"","thumbTpl":"galItemThumb","containerTpl":"","itemCls":"gal-item","activeCls":"gal-item-active","toPlaceholder":"","thumbWidth":"400","thumbHeight":"400","thumbZoomCrop":true,"thumbFar":"C","thumbQuality":90,"thumbProperties":"","linkToImage":"","imageGetParam":"galItem","imageWidth":500,"imageHeight":500,"imageZoomCrop":false,"imageFar":"","imageQuality":90,"imageProperties":"","sort":"rank","dir":"ASC","limit":0,"start":0,"showInactive":false,"checkForRequestAlbumVar":true,"albumRequestVar":"galAlbum","checkForRequestTagVar":true,"tagRequestVar":"galTag","useCss":true,"slimboxLoadJQuery":"0","slimboxRenderJsOnStartup":"0"};
		$("a[rel^=\'lightbox\']").slimbox(opts, function(el) {
			return [encodeURI(el.href), el.title];
		}, function(el) {
			return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
		});
	});
}
</script>',
    ),
    '_loadedjscripts' => 
    array (
      '<!-- This site is optimized with the Sterc seoPro plugin 1.0.4 - http://www.sterc.nl/modx/seopro -->' => true,
      '/assets/components/gallery/packages/slimbox/css/slimbox2.css' => true,
      '/assets/components/gallery/packages/slimbox/js/slimbox2.js' => true,
      '<script type="text/javascript">
if (!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)) {
	jQuery(function($) {
	    var opts = {"loop":false,"overlayOpacity":0.8,"overlayFadeDuration":400,"resizeDuration":400,"resizeEasing":"swing","initialWidth":250,"initialHeight":250,"imageFadeDuration":400,"captionAnimationDuration":400,"counterText":"Image {x} of {y}","album":"\\u0411\\u043e\\u043b\\u0433\\u0430\\u0440\\u0438\\u044f","tag":"","plugin":"slimbox","pluginPath":"","thumbTpl":"galItemThumb","containerTpl":"","itemCls":"gal-item","activeCls":"gal-item-active","toPlaceholder":"","thumbWidth":"400","thumbHeight":"400","thumbZoomCrop":true,"thumbFar":"C","thumbQuality":90,"thumbProperties":"","linkToImage":"","imageGetParam":"galItem","imageWidth":500,"imageHeight":500,"imageZoomCrop":false,"imageFar":"","imageQuality":90,"imageProperties":"","sort":"rank","dir":"ASC","limit":0,"start":0,"showInactive":false,"checkForRequestAlbumVar":true,"albumRequestVar":"galAlbum","checkForRequestTagVar":true,"tagRequestVar":"galTag","useCss":true,"slimboxLoadJQuery":"0","slimboxRenderJsOnStartup":"0"};
		$("a[rel^=\'lightbox\']").slimbox(opts, function(el) {
			return [encodeURI(el.href), el.title];
		}, function(el) {
			return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
		});
	});
}
</script>' => true,
    ),
  ),
  'contentType' => 
  array (
    'id' => 1,
    'name' => 'HTML',
    'description' => 'HTML content',
    'mime_type' => 'text/html',
    'file_extensions' => '',
    'headers' => NULL,
    'binary' => 0,
  ),
  'policyCache' => 
  array (
  ),
  'elementCache' => 
  array (
    '[[*pagetitle]]' => 'О компании',
    '[[$HEAD]]' => '<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>О компании - COMPASS</title>
		<link href="assets/templates/bolgaria/css/fonts.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href="assets/templates/bolgaria/css/jquery-ui.min.css" rel="stylesheet" >
		<link rel="stylesheet" type="text/css" href="assets/templates/bolgaria/css/slick.css"/>
		<link href="assets/templates/bolgaria/css/main.css" rel="stylesheet">
		<link href="assets/templates/bolgaria/css/media.css" rel="stylesheet">
	</head>',
    '[[Wayfinder? &startId=`0` &level=`1` &outerTpl=`tpl_menu` &rowTpl="tpl_item"]]' => '<ul class="menu clearfix"><li class="first"><a href="http://bolgaria.veronikadmytryk.net/" title="Главная" >Главная</a></li>
<li><a href="contacts" title="Контакты" >Контакты</a></li>
<li class="active"><a href="about" title="О компании" >О компании</a></li>
<li class="last"><a href="move" title="Недвижимость и переезд" >Недвижимость и переезд</a></li>
</ul>
',
    '[[*phone_1]]' => '+7 (495) 12-321-345',
    '[[*phone_2]]' => '+7 (495) 12-321-346',
    '[[Wayfinder? &startId=`0` &level=`1` &outerTpl=`tpl_menu_dropdown` &rowTpl="tpl_item_dropdown"]]' => '<ul class="menu__dropdown_block"><li class="first"><a href="http://bolgaria.veronikadmytryk.net/" title="Главная" >Главная</a></li>
<li><a href="contacts" title="Контакты" >Контакты</a></li>
<li class="active"><a href="about" title="О компании" >О компании</a></li>
<li class="last"><a href="move" title="Недвижимость и переезд" >Недвижимость и переезд</a></li>
</ul>',
    '[[$HEADER]]' => '<div class="header">
	<div class="container">
		<div class="row">
			<div class="col-md-2 col-sm-4 col-xs-4">
				<div class="logo"></div>
			</div>
			<div class="col-md-7 hidden-xs hidden-sm">
				<nav>
				    <ul class="menu clearfix"><li class="first"><a href="http://bolgaria.veronikadmytryk.net/" title="Главная" >Главная</a></li>
<li><a href="contacts" title="Контакты" >Контакты</a></li>
<li class="active"><a href="about" title="О компании" >О компании</a></li>
<li class="last"><a href="move" title="Недвижимость и переезд" >Недвижимость и переезд</a></li>
</ul>

					<!--<ul class="menu clearfix"> 
						<li class="menu__item"> 
							<a href="index.html">Главная</a> 
						</li> 
						<li class="menu__item"> 
							<a href="about.html">О компании</a> 
						</li> 
						<li class="menu__item"> 
							<a href="move.html">Переезд в Болгарию</a> 
						</li> 
						<li class="menu__item"> 
							<a href="">Открытие представительства</a> 
						</li> 
					<li class="menu__item"> 
							<a href="contacts.html">Контакты</a> 
						</li> 
					</ul> -->
				</nav>
			</div>
			<div class="col-md-3 col-sm-8 col-xs-8 pull-right">
				<div class="menu__icon pull-right" id="humburger">
					<i class="fa fa-bars"></i>
				</div>
				<div class="phones clearfix">
					<div class="pull-right">
					+7 (495) 12-321-345<br>
    				+7 (495) 12-321-346
					</div>
					<div class="phone__icon pull-right" data-toggle="modal" data-target="#myModal"></div>
				</div>
			</div>
		</div>
	</div>
	<nav class="menu__dropdown hided">
	    <ul class="menu__dropdown_block"><li class="first"><a href="http://bolgaria.veronikadmytryk.net/" title="Главная" >Главная</a></li>
<li><a href="contacts" title="Контакты" >Контакты</a></li>
<li class="active"><a href="about" title="О компании" >О компании</a></li>
<li class="last"><a href="move" title="Недвижимость и переезд" >Недвижимость и переезд</a></li>
</ul>
		<!--<ul class="menu__dropdown_block clearfix">-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="index.html">Главная</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="about.html">О компании</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="move.html">Переезд в Болгарию</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="">Открытие представительства</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="contacts.html">Контакты</a>-->
		<!--	</li>-->
		<!--</ul>-->
	</nav>
</div>',
    '[[*longtitle]]' => 'О компании',
    '[[*id]]' => 3,
    '[[~3?
            &galItem=`11`
            &galAlbum=`Болгария`
            &galTag=`` ]]' => 'about?galItem=11&amp;galAlbum=%D0%91%D0%BE%D0%BB%D0%B3%D0%B0%D1%80%D0%B8%D1%8F&amp;galTag=',
    '[[~3?
            &galItem=`13`
            &galAlbum=`Болгария`
            &galTag=`` ]]' => 'about?galItem=13&amp;galAlbum=%D0%91%D0%BE%D0%BB%D0%B3%D0%B0%D1%80%D0%B8%D1%8F&amp;galTag=',
    '[[~3?
            &galItem=`12`
            &galAlbum=`Болгария`
            &galTag=`` ]]' => 'about?galItem=12&amp;galAlbum=%D0%91%D0%BE%D0%BB%D0%B3%D0%B0%D1%80%D0%B8%D1%8F&amp;galTag=',
    '[[~3?
            &galItem=`14`
            &galAlbum=`Болгария`
            &galTag=`` ]]' => 'about?galItem=14&amp;galAlbum=%D0%91%D0%BE%D0%BB%D0%B3%D0%B0%D1%80%D0%B8%D1%8F&amp;galTag=',
    '[[Gallery? &album=`Болгария` &plugin=`slimbox` &slimboxLoadJQuery=`0` &slimboxRenderJsOnStartup=`0` &thumbWidth=`400` &thumbHeight=`400` ]]' => '<div class="gal-item">
    <a href="/assets/gallery/1/11.png" title="circle3.png"  rel="lightbox">

        <img class="[[+imgCls]]" src="/assets/components/gallery/connector.php?action=web/phpthumb&amp;ctx=web&amp;w=400&amp;h=400&amp;zc=1&amp;far=C&amp;q=90&amp;src=%2Fassets%2Fgallery%2F1%2F11.png" alt="circle3.png"  />
    </a>
</div>
<div class="gal-item">
    <a href="/assets/gallery/1/13.png" title="circle1.png"  rel="lightbox">

        <img class="[[+imgCls]]" src="/assets/components/gallery/connector.php?action=web/phpthumb&amp;ctx=web&amp;w=400&amp;h=400&amp;zc=1&amp;far=C&amp;q=90&amp;src=%2Fassets%2Fgallery%2F1%2F13.png" alt="circle1.png"  />
    </a>
</div>
<div class="gal-item">
    <a href="/assets/gallery/1/12.png" title="circle2.png"  rel="lightbox">

        <img class="[[+imgCls]]" src="/assets/components/gallery/connector.php?action=web/phpthumb&amp;ctx=web&amp;w=400&amp;h=400&amp;zc=1&amp;far=C&amp;q=90&amp;src=%2Fassets%2Fgallery%2F1%2F12.png" alt="circle2.png"  />
    </a>
</div>
<div class="gal-item">
    <a href="/assets/gallery/1/14.png" title="logo-footer.png"  rel="lightbox">

        <img class="[[+imgCls]]" src="/assets/components/gallery/connector.php?action=web/phpthumb&amp;ctx=web&amp;w=400&amp;h=400&amp;zc=1&amp;far=C&amp;q=90&amp;src=%2Fassets%2Fgallery%2F1%2F14.png" alt="logo-footer.png"  />
    </a>
</div>',
    '[[$FOOTER]]' => '<footer>
	<div class="container">
		<div class="row">
			<div class="col-md-3 col-sm-4 col-xs-4">
				<div class="footer__logo"></div>
			</div>
			<div class="col-md-3 col-sm-4 col-xs-8">
				<div class="confidentials">2016 / Все права защищены</div>    
			</div>
			<div class="col-md-3 col-sm-4 hidden-xs">
				<div class="terms"><a href="#" class="footer__link">Политика конфиденциальности</a></div>
			</div>
			<div class="col-md-3 hidden-sm hidden-xs pull-right">
				<div class="phones clearfix">
					<div class="pull-right">
					+7 (495) 12-321-345<br>
					+7 (495) 12-321-346
					</div>
					<div class="phone__icon pull-right"></div>
				</div>
		</div>
		</div>
	</div>
</footer>',
    '[[$MODAL_WINDOW]]' => '<div id="myModal" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<section class="contact text-center">
			<h2 class="section__title">Есть вопросы<br>по переезду в Болгарию?</h2>
				<div class="contact__slogan">Мы проконсультируем Вас бесплатно!</div>
				<div class="header__arrow contact__arrow">
					<i class="fa fa-angle-down"></i>
				</div>
				<form action="success.php" class="js-form" id="popupResult">
					<p><input type="text" placeholder="ИМЯ" name="name" required autofocus></p>
					<p><input type="email" placeholder="E-MAIL" name="email" required></p>
					<p><input type="tel" placeholder="ТЕЛЕФОН" name="tel" required ></p>
					<button type="submit" data-submit>Заказать консультацию</button>
				</form>
		</section>
	</div>
	<div id="loader">
		<img src="assets/templates/bolgaria/img/ripple.svg">
	</div>
	
	<div id="overlay">
		<div id="thx">
			Спасибо! Мы обязательно вам перезвоним в течении 24 часов.
		</div>
   	</div>
</div>',
  ),
  'sourceCache' => 
  array (
    'modChunk' => 
    array (
      'HEAD' => 
      array (
        'fields' => 
        array (
          'id' => 7,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'HEAD',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>[[*pagetitle]] - [[++site_name]]</title>
		<link href="assets/templates/bolgaria/css/fonts.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href="assets/templates/bolgaria/css/jquery-ui.min.css" rel="stylesheet" >
		<link rel="stylesheet" type="text/css" href="assets/templates/bolgaria/css/slick.css"/>
		<link href="assets/templates/bolgaria/css/main.css" rel="stylesheet">
		<link href="assets/templates/bolgaria/css/media.css" rel="stylesheet">
	</head>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>[[*pagetitle]] - [[++site_name]]</title>
		<link href="assets/templates/bolgaria/css/fonts.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href="assets/templates/bolgaria/css/jquery-ui.min.css" rel="stylesheet" >
		<link rel="stylesheet" type="text/css" href="assets/templates/bolgaria/css/slick.css"/>
		<link href="assets/templates/bolgaria/css/main.css" rel="stylesheet">
		<link href="assets/templates/bolgaria/css/media.css" rel="stylesheet">
	</head>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'HEADER' => 
      array (
        'fields' => 
        array (
          'id' => 8,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'HEADER',
          'description' => 'Шапка сайта',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<div class="header">
	<div class="container">
		<div class="row">
			<div class="col-md-2 col-sm-4 col-xs-4">
				<div class="logo"></div>
			</div>
			<div class="col-md-7 hidden-xs hidden-sm">
				<nav>
				    [[Wayfinder? &startId=`0` &level=`1` &outerTpl=`tpl_menu` &rowTpl="tpl_item"]]
					<!--<ul class="menu clearfix"> 
						<li class="menu__item"> 
							<a href="index.html">Главная</a> 
						</li> 
						<li class="menu__item"> 
							<a href="about.html">О компании</a> 
						</li> 
						<li class="menu__item"> 
							<a href="move.html">Переезд в Болгарию</a> 
						</li> 
						<li class="menu__item"> 
							<a href="">Открытие представительства</a> 
						</li> 
					<li class="menu__item"> 
							<a href="contacts.html">Контакты</a> 
						</li> 
					</ul> -->
				</nav>
			</div>
			<div class="col-md-3 col-sm-8 col-xs-8 pull-right">
				<div class="menu__icon pull-right" id="humburger">
					<i class="fa fa-bars"></i>
				</div>
				<div class="phones clearfix">
					<div class="pull-right">
					[[*phone_1]]<br>
    				[[*phone_2]]
					</div>
					<div class="phone__icon pull-right" data-toggle="modal" data-target="#myModal"></div>
				</div>
			</div>
		</div>
	</div>
	<nav class="menu__dropdown hided">
	    [[Wayfinder? &startId=`0` &level=`1` &outerTpl=`tpl_menu_dropdown` &rowTpl="tpl_item_dropdown"]]
		<!--<ul class="menu__dropdown_block clearfix">-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="index.html">Главная</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="about.html">О компании</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="move.html">Переезд в Болгарию</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="">Открытие представительства</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="contacts.html">Контакты</a>-->
		<!--	</li>-->
		<!--</ul>-->
	</nav>
</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<div class="header">
	<div class="container">
		<div class="row">
			<div class="col-md-2 col-sm-4 col-xs-4">
				<div class="logo"></div>
			</div>
			<div class="col-md-7 hidden-xs hidden-sm">
				<nav>
				    [[Wayfinder? &startId=`0` &level=`1` &outerTpl=`tpl_menu` &rowTpl="tpl_item"]]
					<!--<ul class="menu clearfix"> 
						<li class="menu__item"> 
							<a href="index.html">Главная</a> 
						</li> 
						<li class="menu__item"> 
							<a href="about.html">О компании</a> 
						</li> 
						<li class="menu__item"> 
							<a href="move.html">Переезд в Болгарию</a> 
						</li> 
						<li class="menu__item"> 
							<a href="">Открытие представительства</a> 
						</li> 
					<li class="menu__item"> 
							<a href="contacts.html">Контакты</a> 
						</li> 
					</ul> -->
				</nav>
			</div>
			<div class="col-md-3 col-sm-8 col-xs-8 pull-right">
				<div class="menu__icon pull-right" id="humburger">
					<i class="fa fa-bars"></i>
				</div>
				<div class="phones clearfix">
					<div class="pull-right">
					[[*phone_1]]<br>
    				[[*phone_2]]
					</div>
					<div class="phone__icon pull-right" data-toggle="modal" data-target="#myModal"></div>
				</div>
			</div>
		</div>
	</div>
	<nav class="menu__dropdown hided">
	    [[Wayfinder? &startId=`0` &level=`1` &outerTpl=`tpl_menu_dropdown` &rowTpl="tpl_item_dropdown"]]
		<!--<ul class="menu__dropdown_block clearfix">-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="index.html">Главная</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="about.html">О компании</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="move.html">Переезд в Болгарию</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="">Открытие представительства</a>-->
		<!--	</li>-->
		<!--	<li class="menu__dropdown_item">-->
		<!--		<a href="contacts.html">Контакты</a>-->
		<!--	</li>-->
		<!--</ul>-->
	</nav>
</div>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'FOOTER' => 
      array (
        'fields' => 
        array (
          'id' => 9,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'FOOTER',
          'description' => 'Подвал сайта',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<footer>
	<div class="container">
		<div class="row">
			<div class="col-md-3 col-sm-4 col-xs-4">
				<div class="footer__logo"></div>
			</div>
			<div class="col-md-3 col-sm-4 col-xs-8">
				<div class="confidentials">2016 / Все права защищены</div>    
			</div>
			<div class="col-md-3 col-sm-4 hidden-xs">
				<div class="terms"><a href="#" class="footer__link">Политика конфиденциальности</a></div>
			</div>
			<div class="col-md-3 hidden-sm hidden-xs pull-right">
				<div class="phones clearfix">
					<div class="pull-right">
					[[*phone_1]]<br>
					[[*phone_2]]
					</div>
					<div class="phone__icon pull-right"></div>
				</div>
		</div>
		</div>
	</div>
</footer>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<footer>
	<div class="container">
		<div class="row">
			<div class="col-md-3 col-sm-4 col-xs-4">
				<div class="footer__logo"></div>
			</div>
			<div class="col-md-3 col-sm-4 col-xs-8">
				<div class="confidentials">2016 / Все права защищены</div>    
			</div>
			<div class="col-md-3 col-sm-4 hidden-xs">
				<div class="terms"><a href="#" class="footer__link">Политика конфиденциальности</a></div>
			</div>
			<div class="col-md-3 hidden-sm hidden-xs pull-right">
				<div class="phones clearfix">
					<div class="pull-right">
					[[*phone_1]]<br>
					[[*phone_2]]
					</div>
					<div class="phone__icon pull-right"></div>
				</div>
		</div>
		</div>
	</div>
</footer>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'MODAL_WINDOW' => 
      array (
        'fields' => 
        array (
          'id' => 10,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'MODAL_WINDOW',
          'description' => 'Всплывающее окно',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<div id="myModal" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<section class="contact text-center">
			<h2 class="section__title">Есть вопросы<br>по переезду в Болгарию?</h2>
				<div class="contact__slogan">Мы проконсультируем Вас бесплатно!</div>
				<div class="header__arrow contact__arrow">
					<i class="fa fa-angle-down"></i>
				</div>
				<form action="success.php" class="js-form" id="popupResult">
					<p><input type="text" placeholder="ИМЯ" name="name" required autofocus></p>
					<p><input type="email" placeholder="E-MAIL" name="email" required></p>
					<p><input type="tel" placeholder="ТЕЛЕФОН" name="tel" required ></p>
					<button type="submit" data-submit>Заказать консультацию</button>
				</form>
		</section>
	</div>
	<div id="loader">
		<img src="assets/templates/bolgaria/img/ripple.svg">
	</div>
	
	<div id="overlay">
		<div id="thx">
			Спасибо! Мы обязательно вам перезвоним в течении 24 часов.
		</div>
   	</div>
</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<div id="myModal" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<section class="contact text-center">
			<h2 class="section__title">Есть вопросы<br>по переезду в Болгарию?</h2>
				<div class="contact__slogan">Мы проконсультируем Вас бесплатно!</div>
				<div class="header__arrow contact__arrow">
					<i class="fa fa-angle-down"></i>
				</div>
				<form action="success.php" class="js-form" id="popupResult">
					<p><input type="text" placeholder="ИМЯ" name="name" required autofocus></p>
					<p><input type="email" placeholder="E-MAIL" name="email" required></p>
					<p><input type="tel" placeholder="ТЕЛЕФОН" name="tel" required ></p>
					<button type="submit" data-submit>Заказать консультацию</button>
				</form>
		</section>
	</div>
	<div id="loader">
		<img src="assets/templates/bolgaria/img/ripple.svg">
	</div>
	
	<div id="overlay">
		<div id="thx">
			Спасибо! Мы обязательно вам перезвоним в течении 24 часов.
		</div>
   	</div>
</div>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
    'modSnippet' => 
    array (
      'Wayfinder' => 
      array (
        'fields' => 
        array (
          'id' => 15,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'Wayfinder',
          'description' => 'Wayfinder for MODx Revolution 2.0.0-beta-5 and later.',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '/**
 * Wayfinder Snippet to build site navigation menus
 *
 * Totally refactored from original DropMenu nav builder to make it easier to
 * create custom navigation by using chunks as output templates. By using
 * templates, many of the paramaters are no longer needed for flexible output
 * including tables, unordered- or ordered-lists (ULs or OLs), definition lists
 * (DLs) or in any other format you desire.
 *
 * @version 2.1.1-beta5
 * @author Garry Nutting (collabpad.com)
 * @author Kyle Jaebker (muddydogpaws.com)
 * @author Ryan Thrash (modx.com)
 * @author Shaun McCormick (modx.com)
 * @author Jason Coward (modx.com)
 *
 * @example [[Wayfinder? &startId=`0`]]
 *
 * @var modX $modx
 * @var array $scriptProperties
 * 
 * @package wayfinder
 */
$wayfinder_base = $modx->getOption(\'wayfinder.core_path\',$scriptProperties,$modx->getOption(\'core_path\').\'components/wayfinder/\');

/* include a custom config file if specified */
if (isset($scriptProperties[\'config\'])) {
    $scriptProperties[\'config\'] = str_replace(\'../\',\'\',$scriptProperties[\'config\']);
    $scriptProperties[\'config\'] = $wayfinder_base.\'configs/\'.$scriptProperties[\'config\'].\'.config.php\';
} else {
    $scriptProperties[\'config\'] = $wayfinder_base.\'configs/default.config.php\';
}
if (file_exists($scriptProperties[\'config\'])) {
    include $scriptProperties[\'config\'];
}

/* include wayfinder class */
include_once $wayfinder_base.\'wayfinder.class.php\';
if (!$modx->loadClass(\'Wayfinder\',$wayfinder_base,true,true)) {
    return \'error: Wayfinder class not found\';
}
$wf = new Wayfinder($modx,$scriptProperties);

/* get user class definitions
 * TODO: eventually move these into config parameters */
$wf->_css = array(
    \'first\' => isset($firstClass) ? $firstClass : \'\',
    \'last\' => isset($lastClass) ? $lastClass : \'last\',
    \'here\' => isset($hereClass) ? $hereClass : \'active\',
    \'parent\' => isset($parentClass) ? $parentClass : \'\',
    \'row\' => isset($rowClass) ? $rowClass : \'\',
    \'outer\' => isset($outerClass) ? $outerClass : \'\',
    \'inner\' => isset($innerClass) ? $innerClass : \'\',
    \'level\' => isset($levelClass) ? $levelClass: \'\',
    \'self\' => isset($selfClass) ? $selfClass : \'\',
    \'weblink\' => isset($webLinkClass) ? $webLinkClass : \'\'
);

/* get user templates
 * TODO: eventually move these into config parameters */
$wf->_templates = array(
    \'outerTpl\' => isset($outerTpl) ? $outerTpl : \'\',
    \'rowTpl\' => isset($rowTpl) ? $rowTpl : \'\',
    \'parentRowTpl\' => isset($parentRowTpl) ? $parentRowTpl : \'\',
    \'parentRowHereTpl\' => isset($parentRowHereTpl) ? $parentRowHereTpl : \'\',
    \'hereTpl\' => isset($hereTpl) ? $hereTpl : \'\',
    \'innerTpl\' => isset($innerTpl) ? $innerTpl : \'\',
    \'innerRowTpl\' => isset($innerRowTpl) ? $innerRowTpl : \'\',
    \'innerHereTpl\' => isset($innerHereTpl) ? $innerHereTpl : \'\',
    \'activeParentRowTpl\' => isset($activeParentRowTpl) ? $activeParentRowTpl : \'\',
    \'categoryFoldersTpl\' => isset($categoryFoldersTpl) ? $categoryFoldersTpl : \'\',
    \'startItemTpl\' => isset($startItemTpl) ? $startItemTpl : \'\'
);

/* process Wayfinder */
$output = $wf->run();
if ($wf->_config[\'debug\']) {
    $output .= $wf->renderDebugOutput();
}

/* output results */
if ($wf->_config[\'ph\']) {
    $modx->setPlaceholder($wf->_config[\'ph\'],$output);
} else {
    return $output;
}',
          'locked' => false,
          'properties' => 
          array (
            'level' => 
            array (
              'name' => 'level',
              'desc' => 'prop_wayfinder.level_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '0',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Depth (number of levels) to build the menu from. 0 goes through all levels.',
              'area' => '',
              'area_trans' => '',
            ),
            'includeDocs' => 
            array (
              'name' => 'includeDocs',
              'desc' => 'prop_wayfinder.includeDocs_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '0',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Acts as a filter and will limit the output to only the documents specified in this parameter. The startId is still required.',
              'area' => '',
              'area_trans' => '',
            ),
            'excludeDocs' => 
            array (
              'name' => 'excludeDocs',
              'desc' => 'prop_wayfinder.excludeDocs_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '0',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Acts as a filter and will remove the documents specified in this parameter from the output. The startId is still required.',
              'area' => '',
              'area_trans' => '',
            ),
            'contexts' => 
            array (
              'name' => 'contexts',
              'desc' => 'prop_wayfinder.contexts_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Specify the contexts for the Resources that will be loaded in this menu. Useful when used with startId at 0 to show all first-level items. Note: This will increase load times a bit, but if you set cacheResults to 1, that will offset the load time.',
              'area' => '',
              'area_trans' => '',
            ),
            'cacheResults' => 
            array (
              'name' => 'cacheResults',
              'desc' => 'prop_wayfinder.cacheResults_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Cache the generated menu to the MODX Resource cache. Setting this to 1 will speed up the loading of your menus.',
              'area' => '',
              'area_trans' => '',
            ),
            'cacheTime' => 
            array (
              'name' => 'cacheTime',
              'desc' => 'prop_wayfinder.cacheTime_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 3600,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'The number of seconds to store the cached menu, if cacheResults is 1. Set to 0 to store indefinitely until cache is manually cleared.',
              'area' => '',
              'area_trans' => '',
            ),
            'ph' => 
            array (
              'name' => 'ph',
              'desc' => 'prop_wayfinder.ph_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'To display send the output of Wayfinder to a placeholder set the ph parameter equal to the name of the desired placeholder. All output including the debugging (if on) will be sent to the placeholder specified.',
              'area' => '',
              'area_trans' => '',
            ),
            'debug' => 
            array (
              'name' => 'debug',
              'desc' => 'prop_wayfinder.debug_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'With the debug parameter set to 1, Wayfinder will output information on how each Resource was processed.',
              'area' => '',
              'area_trans' => '',
            ),
            'ignoreHidden' => 
            array (
              'name' => 'ignoreHidden',
              'desc' => 'prop_wayfinder.ignoreHidden_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'The ignoreHidden parameter allows Wayfinder to ignore the display in menu flag that can be set for each document. With this parameter set to 1, all Resources will be displayed regardless of the Display in Menu flag.',
              'area' => '',
              'area_trans' => '',
            ),
            'hideSubMenus' => 
            array (
              'name' => 'hideSubMenus',
              'desc' => 'prop_wayfinder.hideSubMenus_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'The hideSubMenus parameter will remove all non-active submenus from the Wayfinder output if set to 1. This parameter only works if multiple levels are being displayed.',
              'area' => '',
              'area_trans' => '',
            ),
            'useWeblinkUrl' => 
            array (
              'name' => 'useWeblinkUrl',
              'desc' => 'prop_wayfinder.useWeblinkUrl_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => ' If WebLinks are used in the output, Wayfinder will output the link specified in the WebLink instead of the normal MODx link. To use the standard display of WebLinks (like any other Resource) set this to 0.',
              'area' => '',
              'area_trans' => '',
            ),
            'fullLink' => 
            array (
              'name' => 'fullLink',
              'desc' => 'prop_wayfinder.fullLink_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'If set to 1, will display the entire, absolute URL in the link. (It is recommended to use scheme instead.)',
              'area' => '',
              'area_trans' => '',
            ),
            'scheme' => 
            array (
              'name' => 'scheme',
              'desc' => 'prop_wayfinder.scheme_desc',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'prop_wayfinder.relative',
                  'value' => '',
                  'name' => 'Relative',
                ),
                1 => 
                array (
                  'text' => 'prop_wayfinder.absolute',
                  'value' => 'abs',
                  'name' => 'Absolute',
                ),
                2 => 
                array (
                  'text' => 'prop_wayfinder.full',
                  'value' => 'full',
                  'name' => 'Full',
                ),
              ),
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Determines how URLs are generated for each link. Set to "abs" to show the absolute URL, "full" to show the full URL, and blank to use the relative URL. Defaults to relative.',
              'area' => '',
              'area_trans' => '',
            ),
            'sortOrder' => 
            array (
              'name' => 'sortOrder',
              'desc' => 'prop_wayfinder.sortOrder_desc',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'prop_wayfinder.ascending',
                  'value' => 'ASC',
                  'name' => 'Ascending',
                ),
                1 => 
                array (
                  'text' => 'prop_wayfinder.descending',
                  'value' => 'DESC',
                  'name' => 'Descending',
                ),
              ),
              'value' => 'ASC',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Allows the menu to be sorted in either ascending or descending order.',
              'area' => '',
              'area_trans' => '',
            ),
            'sortBy' => 
            array (
              'name' => 'sortBy',
              'desc' => 'prop_wayfinder.sortBy_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'menuindex',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Sorts the output by any of the Resource fields on a level by level basis. This means that each submenu will be sorted independently of all other submenus at the same level. Random will sort the output differently every time the page is loaded if the snippet is called uncached.',
              'area' => '',
              'area_trans' => '',
            ),
            'limit' => 
            array (
              'name' => 'limit',
              'desc' => 'prop_wayfinder.limit_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '0',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Causes Wayfinder to only process the number of items specified per level.',
              'area' => '',
              'area_trans' => '',
            ),
            'cssTpl' => 
            array (
              'name' => 'cssTpl',
              'desc' => 'prop_wayfinder.cssTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'This parameter allows for a chunk containing a link to a style sheet or style information to be inserted into the head section of the generated page.',
              'area' => '',
              'area_trans' => '',
            ),
            'jsTpl' => 
            array (
              'name' => 'jsTpl',
              'desc' => 'prop_wayfinder.jsTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'This parameter allows for a chunk containing some Javascript to be inserted into the head section of the generated page.',
              'area' => '',
              'area_trans' => '',
            ),
            'rowIdPrefix' => 
            array (
              'name' => 'rowIdPrefix',
              'desc' => 'prop_wayfinder.rowIdPrefix_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'If set, Wayfinder will replace the id placeholder with a unique id consisting of the specified prefix plus the Resource id.',
              'area' => '',
              'area_trans' => '',
            ),
            'textOfLinks' => 
            array (
              'name' => 'textOfLinks',
              'desc' => 'prop_wayfinder.textOfLinks_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'menutitle',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'This field will be inserted into the linktext placeholder.',
              'area' => '',
              'area_trans' => '',
            ),
            'titleOfLinks' => 
            array (
              'name' => 'titleOfLinks',
              'desc' => 'prop_wayfinder.titleOfLinks_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'pagetitle',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'This field will be inserted into the linktitle placeholder.',
              'area' => '',
              'area_trans' => '',
            ),
            'displayStart' => 
            array (
              'name' => 'displayStart',
              'desc' => 'prop_wayfinder.displayStart_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Show the document as referenced by startId in the menu.',
              'area' => '',
              'area_trans' => '',
            ),
            'firstClass' => 
            array (
              'name' => 'firstClass',
              'desc' => 'prop_wayfinder.firstClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'first',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class for the first item at a given menu level.',
              'area' => '',
              'area_trans' => '',
            ),
            'lastClass' => 
            array (
              'name' => 'lastClass',
              'desc' => 'prop_wayfinder.lastClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'last',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class for the last item at a given menu level.',
              'area' => '',
              'area_trans' => '',
            ),
            'hereClass' => 
            array (
              'name' => 'hereClass',
              'desc' => 'prop_wayfinder.hereClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'active',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class for the items showing where you are, all the way up the chain.',
              'area' => '',
              'area_trans' => '',
            ),
            'parentClass' => 
            array (
              'name' => 'parentClass',
              'desc' => 'prop_wayfinder.parentClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class for menu items that are a container and have children.',
              'area' => '',
              'area_trans' => '',
            ),
            'rowClass' => 
            array (
              'name' => 'rowClass',
              'desc' => 'prop_wayfinder.rowClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class denoting each output row.',
              'area' => '',
              'area_trans' => '',
            ),
            'outerClass' => 
            array (
              'name' => 'outerClass',
              'desc' => 'prop_wayfinder.outerClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class for the outer template.',
              'area' => '',
              'area_trans' => '',
            ),
            'innerClass' => 
            array (
              'name' => 'innerClass',
              'desc' => 'prop_wayfinder.innerClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class for the inner template.',
              'area' => '',
              'area_trans' => '',
            ),
            'levelClass' => 
            array (
              'name' => 'levelClass',
              'desc' => 'prop_wayfinder.levelClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class denoting every output row level. The level number will be added to the specified class (level1, level2, level3 etc if you specified "level").',
              'area' => '',
              'area_trans' => '',
            ),
            'selfClass' => 
            array (
              'name' => 'selfClass',
              'desc' => 'prop_wayfinder.selfClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class for the current item.',
              'area' => '',
              'area_trans' => '',
            ),
            'webLinkClass' => 
            array (
              'name' => 'webLinkClass',
              'desc' => 'prop_wayfinder.webLinkClass_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'CSS class for weblink items.',
              'area' => '',
              'area_trans' => '',
            ),
            'outerTpl' => 
            array (
              'name' => 'outerTpl',
              'desc' => 'prop_wayfinder.outerTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for the outer most container; if not included, a string including "<ul>[[+wf.wrapper]]</ul>" is assumed.',
              'area' => '',
              'area_trans' => '',
            ),
            'rowTpl' => 
            array (
              'name' => 'rowTpl',
              'desc' => 'prop_wayfinder.rowTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for the regular row items.',
              'area' => '',
              'area_trans' => '',
            ),
            'parentRowTpl' => 
            array (
              'name' => 'parentRowTpl',
              'desc' => 'prop_wayfinder.parentRowTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for any Resource that is a container and has children. Remember the [wf.wrapper] placeholder to output the children documents.',
              'area' => '',
              'area_trans' => '',
            ),
            'parentRowHereTpl' => 
            array (
              'name' => 'parentRowHereTpl',
              'desc' => 'prop_wayfinder.parentRowHereTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for the current Resource if it is a container and has children. Remember the [wf.wrapper] placeholder to output the children documents.',
              'area' => '',
              'area_trans' => '',
            ),
            'hereTpl' => 
            array (
              'name' => 'hereTpl',
              'desc' => 'prop_wayfinder.hereTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for the current Resource.',
              'area' => '',
              'area_trans' => '',
            ),
            'innerTpl' => 
            array (
              'name' => 'innerTpl',
              'desc' => 'prop_wayfinder.innerTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for each submenu. If no innerTpl is specified the outerTpl is used in its place.',
              'area' => '',
              'area_trans' => '',
            ),
            'innerRowTpl' => 
            array (
              'name' => 'innerRowTpl',
              'desc' => 'prop_wayfinder.innerRowTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for the row items in a subfolder.',
              'area' => '',
              'area_trans' => '',
            ),
            'innerHereTpl' => 
            array (
              'name' => 'innerHereTpl',
              'desc' => 'prop_wayfinder.innerHereTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for the current Resource if it is in a subfolder.',
              'area' => '',
              'area_trans' => '',
            ),
            'activeParentRowTpl' => 
            array (
              'name' => 'activeParentRowTpl',
              'desc' => 'prop_wayfinder.activeParentRowTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for items that are containers, have children and are currently active in the tree.',
              'area' => '',
              'area_trans' => '',
            ),
            'categoryFoldersTpl' => 
            array (
              'name' => 'categoryFoldersTpl',
              'desc' => 'prop_wayfinder.categoryFoldersTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for category folders. Category folders are determined by setting the template to blank or by setting the link attributes field to rel="category".',
              'area' => '',
              'area_trans' => '',
            ),
            'startItemTpl' => 
            array (
              'name' => 'startItemTpl',
              'desc' => 'prop_wayfinder.startItemTpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Name of the chunk containing the template for the start item, if enabled via the &displayStart parameter. Note: the default template shows the start item but does not link it. If you do not need a link, a class can be applied to the default template using the parameter &firstClass=`className`.',
              'area' => '',
              'area_trans' => '',
            ),
            'permissions' => 
            array (
              'name' => 'permissions',
              'desc' => 'prop_wayfinder.permissions_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'list',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Will check for a permission on the Resource. Defaults to "list" - set to blank to skip normal permissions checks.',
              'area' => '',
              'area_trans' => '',
            ),
            'hereId' => 
            array (
              'name' => 'hereId',
              'desc' => 'prop_wayfinder.hereId_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Optional. If set, will change the "here" Resource to this ID. Defaults to the currently active Resource.',
              'area' => '',
              'area_trans' => '',
            ),
            'where' => 
            array (
              'name' => 'where',
              'desc' => 'prop_wayfinder.where_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Optional. A JSON object for where conditions for all items selected in the menu.',
              'area' => '',
              'area_trans' => '',
            ),
            'templates' => 
            array (
              'name' => 'templates',
              'desc' => 'prop_wayfinder.templates_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Optional. A comma-separated list of Template IDs to restrict selected Resources to.',
              'area' => '',
              'area_trans' => '',
            ),
            'previewUnpublished' => 
            array (
              'name' => 'previewUnpublished',
              'desc' => 'prop_wayfinder.previewunpublished_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'wayfinder:properties',
              'desc_trans' => 'Optional. If set to Yes, if you are logged into the mgr and have the view_unpublished permission, it will allow previewing of unpublished resources in your menus in the front-end.',
              'area' => '',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * Wayfinder Snippet to build site navigation menus
 *
 * Totally refactored from original DropMenu nav builder to make it easier to
 * create custom navigation by using chunks as output templates. By using
 * templates, many of the paramaters are no longer needed for flexible output
 * including tables, unordered- or ordered-lists (ULs or OLs), definition lists
 * (DLs) or in any other format you desire.
 *
 * @version 2.1.1-beta5
 * @author Garry Nutting (collabpad.com)
 * @author Kyle Jaebker (muddydogpaws.com)
 * @author Ryan Thrash (modx.com)
 * @author Shaun McCormick (modx.com)
 * @author Jason Coward (modx.com)
 *
 * @example [[Wayfinder? &startId=`0`]]
 *
 * @var modX $modx
 * @var array $scriptProperties
 * 
 * @package wayfinder
 */
$wayfinder_base = $modx->getOption(\'wayfinder.core_path\',$scriptProperties,$modx->getOption(\'core_path\').\'components/wayfinder/\');

/* include a custom config file if specified */
if (isset($scriptProperties[\'config\'])) {
    $scriptProperties[\'config\'] = str_replace(\'../\',\'\',$scriptProperties[\'config\']);
    $scriptProperties[\'config\'] = $wayfinder_base.\'configs/\'.$scriptProperties[\'config\'].\'.config.php\';
} else {
    $scriptProperties[\'config\'] = $wayfinder_base.\'configs/default.config.php\';
}
if (file_exists($scriptProperties[\'config\'])) {
    include $scriptProperties[\'config\'];
}

/* include wayfinder class */
include_once $wayfinder_base.\'wayfinder.class.php\';
if (!$modx->loadClass(\'Wayfinder\',$wayfinder_base,true,true)) {
    return \'error: Wayfinder class not found\';
}
$wf = new Wayfinder($modx,$scriptProperties);

/* get user class definitions
 * TODO: eventually move these into config parameters */
$wf->_css = array(
    \'first\' => isset($firstClass) ? $firstClass : \'\',
    \'last\' => isset($lastClass) ? $lastClass : \'last\',
    \'here\' => isset($hereClass) ? $hereClass : \'active\',
    \'parent\' => isset($parentClass) ? $parentClass : \'\',
    \'row\' => isset($rowClass) ? $rowClass : \'\',
    \'outer\' => isset($outerClass) ? $outerClass : \'\',
    \'inner\' => isset($innerClass) ? $innerClass : \'\',
    \'level\' => isset($levelClass) ? $levelClass: \'\',
    \'self\' => isset($selfClass) ? $selfClass : \'\',
    \'weblink\' => isset($webLinkClass) ? $webLinkClass : \'\'
);

/* get user templates
 * TODO: eventually move these into config parameters */
$wf->_templates = array(
    \'outerTpl\' => isset($outerTpl) ? $outerTpl : \'\',
    \'rowTpl\' => isset($rowTpl) ? $rowTpl : \'\',
    \'parentRowTpl\' => isset($parentRowTpl) ? $parentRowTpl : \'\',
    \'parentRowHereTpl\' => isset($parentRowHereTpl) ? $parentRowHereTpl : \'\',
    \'hereTpl\' => isset($hereTpl) ? $hereTpl : \'\',
    \'innerTpl\' => isset($innerTpl) ? $innerTpl : \'\',
    \'innerRowTpl\' => isset($innerRowTpl) ? $innerRowTpl : \'\',
    \'innerHereTpl\' => isset($innerHereTpl) ? $innerHereTpl : \'\',
    \'activeParentRowTpl\' => isset($activeParentRowTpl) ? $activeParentRowTpl : \'\',
    \'categoryFoldersTpl\' => isset($categoryFoldersTpl) ? $categoryFoldersTpl : \'\',
    \'startItemTpl\' => isset($startItemTpl) ? $startItemTpl : \'\'
);

/* process Wayfinder */
$output = $wf->run();
if ($wf->_config[\'debug\']) {
    $output .= $wf->renderDebugOutput();
}

/* output results */
if ($wf->_config[\'ph\']) {
    $modx->setPlaceholder($wf->_config[\'ph\'],$output);
} else {
    return $output;
}',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
      'Gallery' => 
      array (
        'fields' => 
        array (
          'id' => 11,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'Gallery',
          'description' => '',
          'editor_type' => 0,
          'category' => 3,
          'cache_type' => 0,
          'snippet' => '/**
 * Gallery
 *
 * Copyright 2010-2012 by Shaun McCormick <shaun@modx.com>
 *
 * Gallery is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * Gallery is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Gallery; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package gallery
 */
/**
 * The main Gallery snippet.
 *
 * @var modX $modx
 * @var Gallery $gallery
 * 
 * @package gallery
 */
$gallery = $modx->getService(\'gallery\',\'Gallery\',$modx->getOption(\'gallery.core_path\',null,$modx->getOption(\'core_path\').\'components/gallery/\').\'model/gallery/\',$scriptProperties);
if (!($gallery instanceof Gallery)) return \'\';
$modx->lexicon->load(\'gallery:web\');

/* check for REQUEST vars if property set */
$imageGetParam = $modx->getOption(\'imageGetParam\',$scriptProperties,\'galItem\');
$albumRequestVar = $modx->getOption(\'albumRequestVar\',$scriptProperties,\'galAlbum\');
$tagRequestVar = $modx->getOption(\'tagRequestVar\',$scriptProperties,\'galTag\');
if ($modx->getOption(\'checkForRequestAlbumVar\',$scriptProperties,true)) {
    if (!empty($_REQUEST[$albumRequestVar])) $scriptProperties[\'album\'] = $_REQUEST[$albumRequestVar];
}
if ($modx->getOption(\'checkForRequestTagVar\',$scriptProperties,true)) {
    if (!empty($_REQUEST[$tagRequestVar])) $scriptProperties[\'tag\'] = $_REQUEST[$tagRequestVar];
}
if (empty($scriptProperties[\'album\']) && empty($scriptProperties[\'tag\'])) return \'\';

$data = $modx->call(\'galItem\',\'getList\',array(&$modx,$scriptProperties));
$totalVar = $modx->getOption(\'totalVar\', $scriptProperties, \'total\');
$modx->setPlaceholder($totalVar,$data[\'total\']);

/* load plugins */
$plugin = $modx->getOption(\'plugin\',$scriptProperties,\'\');
if (!empty($plugin)) {
    $pluginPath = $modx->getOption(\'pluginPath\',$scriptProperties,\'\');
    if (empty($pluginPath)) {
        $pluginPath = $gallery->config[\'modelPath\'].\'gallery/plugins/\';
    }
    /** @var GalleryPlugin $plugin */
    if (($className = $modx->loadClass($plugin,$pluginPath,true,true))) {
        $plugin = new $className($gallery,$scriptProperties);
        $plugin->load();
        $scriptProperties = $plugin->adjustSettings($scriptProperties);
    } else {
        return $modx->lexicon(\'gallery.plugin_err_load\',array(\'name\' => $plugin,\'path\' => $pluginPath));
    }
} else {
    if ($modx->getOption(\'useCss\',$scriptProperties,true)) {
        $modx->regClientCSS($gallery->config[\'cssUrl\'].\'web.css\');
    }
}

/* iterate */
$imageProperties = $modx->getOption(\'imageProperties\',$scriptProperties,\'\');
$imageProperties = !empty($imageProperties) ? $modx->fromJSON($imageProperties) : array();
$imageProperties = array_merge(array(
    \'w\' => (int)$modx->getOption(\'imageWidth\',$scriptProperties,500),
    \'h\' => (int)$modx->getOption(\'imageHeight\',$scriptProperties,500),
    \'zc\' => (boolean)$modx->getOption(\'imageZoomCrop\',$scriptProperties,0),
    \'far\' => (string)$modx->getOption(\'imageFar\',$scriptProperties,false),
    \'q\' => (int)$modx->getOption(\'imageQuality\',$scriptProperties,90),
),$imageProperties);

$thumbProperties = $modx->getOption(\'thumbProperties\',$scriptProperties,\'\');
$thumbProperties = !empty($thumbProperties) ? $modx->fromJSON($thumbProperties) : array();
$thumbProperties = array_merge(array(
    \'w\' => (int)$modx->getOption(\'thumbWidth\',$scriptProperties,100),
    \'h\' => (int)$modx->getOption(\'thumbHeight\',$scriptProperties,100),
    \'zc\' => (boolean)$modx->getOption(\'thumbZoomCrop\',$scriptProperties,1),
    \'far\' => (string)$modx->getOption(\'thumbFar\',$scriptProperties,\'C\'),
    \'q\' => (int)$modx->getOption(\'thumbQuality\',$scriptProperties,90),
),$thumbProperties);

$idx = 0;
$output = array();
$filesUrl = $modx->call(\'galAlbum\',\'getFilesUrl\',array(&$modx));
$filesPath = $modx->call(\'galAlbum\',\'getFilesPath\',array(&$modx));
$itemCls = $modx->getOption(\'itemCls\',$scriptProperties,\'gal-item\');
$imageAttributes = $modx->getOption(\'imageAttributes\',$scriptProperties,\'\');
$linkAttributes = $modx->getOption(\'linkAttributes\',$scriptProperties,\'\');
$linkToImage = $modx->getOption(\'linkToImage\',$scriptProperties,false);
$activeCls = $modx->getOption(\'activeCls\',$scriptProperties,\'gal-item-active\');
$highlightItem = $modx->getOption($imageGetParam,$_REQUEST,false);
$defaultThumbTpl = $modx->getOption(\'thumbTpl\',$scriptProperties,\'galItemThumb\');

/** @var galItem $item */

if (!is_array($data)) return \'\';

// prep for &thumbTpl_N
$keys = array_keys($scriptProperties);
$nthTpls = array();
foreach($keys as $key) {
    $keyBits = $gallery->explodeAndClean($key, \'_\');
    if (isset($keyBits[0]) && $keyBits[0] === \'thumbTpl\') {
        if ($i = (int) $keyBits[1]) $nthTpls[$i] = $scriptProperties[$key];
    }
}
ksort($nthTpls);

foreach ($data[\'items\'] as $item) {
    $itemArray = $item->toArray();
    $itemArray[\'idx\'] = $idx;
    $itemArray[\'cls\'] = $itemCls;
    if ($itemArray[\'id\'] == $highlightItem) {
        $itemArray[\'cls\'] .= \' \'.$activeCls;
    }
    $itemArray[\'filename\'] = basename($item->get(\'filename\'));
    $itemArray[\'image_absolute\'] = $item->get(\'base_url\').$filesUrl.$item->get(\'filename\');
    $itemArray[\'fileurl\'] = $itemArray[\'image_absolute\'];
    $itemArray[\'filepath\'] = $filesPath.$item->get(\'filename\');
    $itemArray[\'filesize\'] = $item->get(\'filesize\');
    $itemArray[\'thumbnail\'] = $item->get(\'thumbnail\',$thumbProperties);
    $itemArray[\'image\'] = $item->get(\'thumbnail\',$imageProperties);
    $itemArray[\'image_attributes\'] = $imageAttributes;
    $itemArray[\'link_attributes\'] = $linkAttributes;
    if (!empty($scriptProperties[\'album\'])) $itemArray[\'album\'] = $scriptProperties[\'album\'];
    if (!empty($scriptProperties[\'tag\'])) $itemArray[\'tag\'] = $scriptProperties[\'tag\'];
    $itemArray[\'linkToImage\'] = $linkToImage;
    $itemArray[\'url\'] = $item->get(\'url\');
    $itemArray[\'imageGetParam\'] = $imageGetParam;
    $itemArray[\'albumRequestVar\'] = $albumRequestVar;
    $itemArray[\'tagRequestVar\'] = $tagRequestVar;
    $itemArray[\'tag\'] = \'\';
    if ($plugin) {
        $plugin->renderItem($itemArray);
    }

    $thumbTpl = $defaultThumbTpl;
    if (isset($nthTpls[$idx])) {
        $thumbTpl = $nthTpls[$idx];
    } else {
        foreach ($nthTpls as $int => $tpl) {
            if ( ($idx % $int) === 0 ) $thumbTpl = $tpl;
        }
    }

    $output[] = $gallery->getChunk($thumbTpl,$itemArray);

    $idx++;
}
$output = implode("\\n",$output);

/* if set, place in a container tpl */
$containerTpl = $modx->getOption(\'containerTpl\',$scriptProperties,false);
if (!empty($containerTpl)) {
    $ct = $gallery->getChunk($containerTpl,array(
        \'thumbnails\' => $output,
        \'album_name\' => $data[\'album\'][\'name\'],
        \'album_description\' => $data[\'album\'][\'description\'],
        \'album_year\' => isset($data[\'album\'][\'year\']) ? $data[\'album\'][\'year\'] : \'\',
        \'albumRequestVar\' => $albumRequestVar,
        \'albumId\' => $data[\'album\'][\'id\'],
    ));
    if (!empty($ct)) $output = $ct;
}

/* set to placeholders or output directly */
$toPlaceholder = $modx->getOption(\'toPlaceholder\',$scriptProperties,false);
if (!empty($toPlaceholder)) {
    $modx->toPlaceholders(array(
        $toPlaceholder => $output,
        $toPlaceholder.\'.id\' => $data[\'album\'][\'id\'],
        $toPlaceholder.\'.name\' => $data[\'album\'][\'name\'],
        $toPlaceholder.\'.year\' => isset($data[\'album\'][\'year\']) ? $data[\'album\'][\'year\'] : \'\',
        $toPlaceholder.\'.description\' => $data[\'album\'][\'description\'],
        $toPlaceholder.\'.total\' => $data[\'total\'],
        $toPlaceholder.\'.next\' => $data[\'album\'][\'id\'] + 1,
        $toPlaceholder.\'.prev\' => $data[\'album\'][\'id\'] - 1,
    ));
} else {
    $placeholderPrefix = $modx->getOption(\'placeholderPrefix\',$scriptProperties,\'gallery.\');
    $modx->toPlaceholders(array(
        $placeholderPrefix.\'id\' => $data[\'album\'][\'id\'],
        $placeholderPrefix.\'name\' => $data[\'album\'][\'name\'],
        $placeholderPrefix.\'year\' => isset($data[\'album\'][\'year\']) ? $data[\'album\'][\'year\'] : \'\',
        $placeholderPrefix.\'description\' => $data[\'album\'][\'description\'],
        $placeholderPrefix.\'total\' => $data[\'total\'],
        $placeholderPrefix.\'next\' => $data[\'album\'][\'id\'] + 1,
        $placeholderPrefix.\'prev\' => $data[\'album\'][\'id\'] - 1,
    ));
    return $output;
}
return \'\';',
          'locked' => false,
          'properties' => 
          array (
            'album' => 
            array (
              'name' => 'album',
              'desc' => 'gallery.album_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'Will load only items from this album. Can be either the name or ID of the Album.',
              'area_trans' => '',
            ),
            'tag' => 
            array (
              'name' => 'tag',
              'desc' => 'gallery.tag_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'Will load only items with this tag.',
              'area_trans' => '',
            ),
            'plugin' => 
            array (
              'name' => 'plugin',
              'desc' => 'gallery.plugin_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The name of a plugin to use for front-end displaying. Please see the official docs for a list of available plugins.',
              'area_trans' => '',
            ),
            'pluginPath' => 
            array (
              'name' => 'pluginPath',
              'desc' => 'gallery.pluginpath_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'Could not load plugin "[[+name]]" from path: [[+path]]',
              'area_trans' => '',
            ),
            'thumbTpl' => 
            array (
              'name' => 'thumbTpl',
              'desc' => 'gallery.thumbtpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'galItemThumb',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The Chunk to use as a tpl for each thumbnail.',
              'area_trans' => '',
            ),
            'containerTpl' => 
            array (
              'name' => 'containerTpl',
              'desc' => 'gallery.containertpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'An optional chunk to wrap the output in.',
              'area_trans' => '',
            ),
            'itemCls' => 
            array (
              'name' => 'itemCls',
              'desc' => 'gallery.itemcls_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'gal-item',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The CSS class for each thumbnail.',
              'area_trans' => '',
            ),
            'activeCls' => 
            array (
              'name' => 'activeCls',
              'desc' => 'gallery.activecls_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'gal-item-active',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The CSS class to add when the active item (the item specified in the GalleryItem snippet) is displayed.',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'gallery.toplaceholder_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If set, will set the output to a placeholder of this value, and the snippet call will output nothing.',
              'area_trans' => '',
            ),
            'thumbWidth' => 
            array (
              'name' => 'thumbWidth',
              'desc' => 'gallery.thumbwidth_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '100',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The width of the generated thumbnails, in pixels.',
              'area_trans' => '',
            ),
            'thumbHeight' => 
            array (
              'name' => 'thumbHeight',
              'desc' => 'gallery.thumbheight_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '100',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The height of the generated thumbnails, in pixels.',
              'area_trans' => '',
            ),
            'thumbZoomCrop' => 
            array (
              'name' => 'thumbZoomCrop',
              'desc' => 'gallery.thumbzoomcrop_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'Whether or not the thumbnail will be zoom-cropped.',
              'area_trans' => '',
            ),
            'thumbFar' => 
            array (
              'name' => 'thumbFar',
              'desc' => 'gallery.thumbfar_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'C',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The "far" value for phpThumb for the thumbnail, for aspect ratio zooming.',
              'area_trans' => '',
            ),
            'thumbQuality' => 
            array (
              'name' => 'thumbQuality',
              'desc' => 'gallery.thumbquality_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 90,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The "q" value for phpThumb for the thumbnail, for quality.',
              'area_trans' => '',
            ),
            'thumbProperties' => 
            array (
              'name' => 'thumbProperties',
              'desc' => 'gallery.thumbproperties_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'A JSON object of parameters to pass to phpThumb as properties for the thumbnail.',
              'area_trans' => '',
            ),
            'linkToImage' => 
            array (
              'name' => 'linkToImage',
              'desc' => 'gallery.linktoimage_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If true, will link directly to the image. If false, will append GET parameters to the URL to load the image with the GalleryItem snippet.',
              'area_trans' => '',
            ),
            'imageGetParam' => 
            array (
              'name' => 'imageGetParam',
              'desc' => 'gallery.imagegetparam_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'galItem',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The GET param to use when not linking directly to an image. Make sure this matches the getParam property in the GalleryItem snippet call.',
              'area_trans' => '',
            ),
            'imageWidth' => 
            array (
              'name' => 'imageWidth',
              'desc' => 'gallery.imagewidth_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 500,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If being used by a plugin, the width of the currently on-display image.',
              'area_trans' => '',
            ),
            'imageHeight' => 
            array (
              'name' => 'imageHeight',
              'desc' => 'gallery.imageheight_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 500,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If being used by a plugin, the height of the currently on-display image.',
              'area_trans' => '',
            ),
            'imageZoomCrop' => 
            array (
              'name' => 'imageZoomCrop',
              'desc' => 'gallery.imagezoomcrop_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If being used by a plugin, whether or not the currently on-display image will be zoom-cropped.',
              'area_trans' => '',
            ),
            'imageFar' => 
            array (
              'name' => 'imageFar',
              'desc' => 'gallery.imagefar_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The "far" value for phpThumb for the image, for aspect ratio zooming.',
              'area_trans' => '',
            ),
            'imageQuality' => 
            array (
              'name' => 'imageQuality',
              'desc' => 'gallery.imagequality_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 90,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The "q" value for phpThumb for the image, for quality.',
              'area_trans' => '',
            ),
            'imageProperties' => 
            array (
              'name' => 'imageProperties',
              'desc' => 'gallery.imageproperties_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'A JSON object of parameters to pass to phpThumb as properties for the image.',
              'area_trans' => '',
            ),
            'sort' => 
            array (
              'name' => 'sort',
              'desc' => 'gallery.sort_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'rank',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The field to sort images by.',
              'area_trans' => '',
            ),
            'dir' => 
            array (
              'name' => 'dir',
              'desc' => 'gallery.dir_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'ASC',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The direction to sort images by.',
              'area_trans' => '',
            ),
            'limit' => 
            array (
              'name' => 'limit',
              'desc' => 'gallery.limit_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 0,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If set to non-zero, will only show X number of items.',
              'area_trans' => '',
            ),
            'start' => 
            array (
              'name' => 'start',
              'desc' => 'gallery.start_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 0,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'The index to start grabbing from when limiting the number of items. Similar to an SQL order by start clause.',
              'area_trans' => '',
            ),
            'showInactive' => 
            array (
              'name' => 'showInactive',
              'desc' => 'gallery.showinactive_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If 1, will also display inactive images.',
              'area_trans' => '',
            ),
            'checkForRequestAlbumVar' => 
            array (
              'name' => 'checkForRequestAlbumVar',
              'desc' => 'gallery.checkforrequestalbumvar_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If 1, if a REQUEST var of "album" is found, will use that as the album property for the snippet.',
              'area_trans' => '',
            ),
            'albumRequestVar' => 
            array (
              'name' => 'albumRequestVar',
              'desc' => 'gallery.albumrequestvar_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'galAlbum',
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If checkForRequestAlbumVar is set to true, will look for a REQUEST var with this name to select the album.',
              'area_trans' => '',
            ),
            'checkForRequestTagVar' => 
            array (
              'name' => 'checkForRequestTagVar',
              'desc' => 'gallery.checkforrequesttagvar_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'If 1, if a REQUEST var of "tag" is found, will use that as the tag property for the snippet.',
              'area_trans' => '',
            ),
            'tagRequestVar' => 
            array (
              'name' => 'tagRequestVar',
              'desc' => 'gallery.tagrequestvar_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'galTag',
              'lexicon' => NULL,
              'area' => '',
              'desc_trans' => 'If checkForRequestTagVar is set to true, will look for a REQUEST var with this name to select the tag.',
              'area_trans' => '',
            ),
            'useCss' => 
            array (
              'name' => 'useCss',
              'desc' => 'gallery.usecss_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'gallery:properties',
              'area' => '',
              'desc_trans' => 'Whether or not to use the pre-provided CSS for the snippet.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * Gallery
 *
 * Copyright 2010-2012 by Shaun McCormick <shaun@modx.com>
 *
 * Gallery is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * Gallery is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Gallery; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package gallery
 */
/**
 * The main Gallery snippet.
 *
 * @var modX $modx
 * @var Gallery $gallery
 * 
 * @package gallery
 */
$gallery = $modx->getService(\'gallery\',\'Gallery\',$modx->getOption(\'gallery.core_path\',null,$modx->getOption(\'core_path\').\'components/gallery/\').\'model/gallery/\',$scriptProperties);
if (!($gallery instanceof Gallery)) return \'\';
$modx->lexicon->load(\'gallery:web\');

/* check for REQUEST vars if property set */
$imageGetParam = $modx->getOption(\'imageGetParam\',$scriptProperties,\'galItem\');
$albumRequestVar = $modx->getOption(\'albumRequestVar\',$scriptProperties,\'galAlbum\');
$tagRequestVar = $modx->getOption(\'tagRequestVar\',$scriptProperties,\'galTag\');
if ($modx->getOption(\'checkForRequestAlbumVar\',$scriptProperties,true)) {
    if (!empty($_REQUEST[$albumRequestVar])) $scriptProperties[\'album\'] = $_REQUEST[$albumRequestVar];
}
if ($modx->getOption(\'checkForRequestTagVar\',$scriptProperties,true)) {
    if (!empty($_REQUEST[$tagRequestVar])) $scriptProperties[\'tag\'] = $_REQUEST[$tagRequestVar];
}
if (empty($scriptProperties[\'album\']) && empty($scriptProperties[\'tag\'])) return \'\';

$data = $modx->call(\'galItem\',\'getList\',array(&$modx,$scriptProperties));
$totalVar = $modx->getOption(\'totalVar\', $scriptProperties, \'total\');
$modx->setPlaceholder($totalVar,$data[\'total\']);

/* load plugins */
$plugin = $modx->getOption(\'plugin\',$scriptProperties,\'\');
if (!empty($plugin)) {
    $pluginPath = $modx->getOption(\'pluginPath\',$scriptProperties,\'\');
    if (empty($pluginPath)) {
        $pluginPath = $gallery->config[\'modelPath\'].\'gallery/plugins/\';
    }
    /** @var GalleryPlugin $plugin */
    if (($className = $modx->loadClass($plugin,$pluginPath,true,true))) {
        $plugin = new $className($gallery,$scriptProperties);
        $plugin->load();
        $scriptProperties = $plugin->adjustSettings($scriptProperties);
    } else {
        return $modx->lexicon(\'gallery.plugin_err_load\',array(\'name\' => $plugin,\'path\' => $pluginPath));
    }
} else {
    if ($modx->getOption(\'useCss\',$scriptProperties,true)) {
        $modx->regClientCSS($gallery->config[\'cssUrl\'].\'web.css\');
    }
}

/* iterate */
$imageProperties = $modx->getOption(\'imageProperties\',$scriptProperties,\'\');
$imageProperties = !empty($imageProperties) ? $modx->fromJSON($imageProperties) : array();
$imageProperties = array_merge(array(
    \'w\' => (int)$modx->getOption(\'imageWidth\',$scriptProperties,500),
    \'h\' => (int)$modx->getOption(\'imageHeight\',$scriptProperties,500),
    \'zc\' => (boolean)$modx->getOption(\'imageZoomCrop\',$scriptProperties,0),
    \'far\' => (string)$modx->getOption(\'imageFar\',$scriptProperties,false),
    \'q\' => (int)$modx->getOption(\'imageQuality\',$scriptProperties,90),
),$imageProperties);

$thumbProperties = $modx->getOption(\'thumbProperties\',$scriptProperties,\'\');
$thumbProperties = !empty($thumbProperties) ? $modx->fromJSON($thumbProperties) : array();
$thumbProperties = array_merge(array(
    \'w\' => (int)$modx->getOption(\'thumbWidth\',$scriptProperties,100),
    \'h\' => (int)$modx->getOption(\'thumbHeight\',$scriptProperties,100),
    \'zc\' => (boolean)$modx->getOption(\'thumbZoomCrop\',$scriptProperties,1),
    \'far\' => (string)$modx->getOption(\'thumbFar\',$scriptProperties,\'C\'),
    \'q\' => (int)$modx->getOption(\'thumbQuality\',$scriptProperties,90),
),$thumbProperties);

$idx = 0;
$output = array();
$filesUrl = $modx->call(\'galAlbum\',\'getFilesUrl\',array(&$modx));
$filesPath = $modx->call(\'galAlbum\',\'getFilesPath\',array(&$modx));
$itemCls = $modx->getOption(\'itemCls\',$scriptProperties,\'gal-item\');
$imageAttributes = $modx->getOption(\'imageAttributes\',$scriptProperties,\'\');
$linkAttributes = $modx->getOption(\'linkAttributes\',$scriptProperties,\'\');
$linkToImage = $modx->getOption(\'linkToImage\',$scriptProperties,false);
$activeCls = $modx->getOption(\'activeCls\',$scriptProperties,\'gal-item-active\');
$highlightItem = $modx->getOption($imageGetParam,$_REQUEST,false);
$defaultThumbTpl = $modx->getOption(\'thumbTpl\',$scriptProperties,\'galItemThumb\');

/** @var galItem $item */

if (!is_array($data)) return \'\';

// prep for &thumbTpl_N
$keys = array_keys($scriptProperties);
$nthTpls = array();
foreach($keys as $key) {
    $keyBits = $gallery->explodeAndClean($key, \'_\');
    if (isset($keyBits[0]) && $keyBits[0] === \'thumbTpl\') {
        if ($i = (int) $keyBits[1]) $nthTpls[$i] = $scriptProperties[$key];
    }
}
ksort($nthTpls);

foreach ($data[\'items\'] as $item) {
    $itemArray = $item->toArray();
    $itemArray[\'idx\'] = $idx;
    $itemArray[\'cls\'] = $itemCls;
    if ($itemArray[\'id\'] == $highlightItem) {
        $itemArray[\'cls\'] .= \' \'.$activeCls;
    }
    $itemArray[\'filename\'] = basename($item->get(\'filename\'));
    $itemArray[\'image_absolute\'] = $item->get(\'base_url\').$filesUrl.$item->get(\'filename\');
    $itemArray[\'fileurl\'] = $itemArray[\'image_absolute\'];
    $itemArray[\'filepath\'] = $filesPath.$item->get(\'filename\');
    $itemArray[\'filesize\'] = $item->get(\'filesize\');
    $itemArray[\'thumbnail\'] = $item->get(\'thumbnail\',$thumbProperties);
    $itemArray[\'image\'] = $item->get(\'thumbnail\',$imageProperties);
    $itemArray[\'image_attributes\'] = $imageAttributes;
    $itemArray[\'link_attributes\'] = $linkAttributes;
    if (!empty($scriptProperties[\'album\'])) $itemArray[\'album\'] = $scriptProperties[\'album\'];
    if (!empty($scriptProperties[\'tag\'])) $itemArray[\'tag\'] = $scriptProperties[\'tag\'];
    $itemArray[\'linkToImage\'] = $linkToImage;
    $itemArray[\'url\'] = $item->get(\'url\');
    $itemArray[\'imageGetParam\'] = $imageGetParam;
    $itemArray[\'albumRequestVar\'] = $albumRequestVar;
    $itemArray[\'tagRequestVar\'] = $tagRequestVar;
    $itemArray[\'tag\'] = \'\';
    if ($plugin) {
        $plugin->renderItem($itemArray);
    }

    $thumbTpl = $defaultThumbTpl;
    if (isset($nthTpls[$idx])) {
        $thumbTpl = $nthTpls[$idx];
    } else {
        foreach ($nthTpls as $int => $tpl) {
            if ( ($idx % $int) === 0 ) $thumbTpl = $tpl;
        }
    }

    $output[] = $gallery->getChunk($thumbTpl,$itemArray);

    $idx++;
}
$output = implode("\\n",$output);

/* if set, place in a container tpl */
$containerTpl = $modx->getOption(\'containerTpl\',$scriptProperties,false);
if (!empty($containerTpl)) {
    $ct = $gallery->getChunk($containerTpl,array(
        \'thumbnails\' => $output,
        \'album_name\' => $data[\'album\'][\'name\'],
        \'album_description\' => $data[\'album\'][\'description\'],
        \'album_year\' => isset($data[\'album\'][\'year\']) ? $data[\'album\'][\'year\'] : \'\',
        \'albumRequestVar\' => $albumRequestVar,
        \'albumId\' => $data[\'album\'][\'id\'],
    ));
    if (!empty($ct)) $output = $ct;
}

/* set to placeholders or output directly */
$toPlaceholder = $modx->getOption(\'toPlaceholder\',$scriptProperties,false);
if (!empty($toPlaceholder)) {
    $modx->toPlaceholders(array(
        $toPlaceholder => $output,
        $toPlaceholder.\'.id\' => $data[\'album\'][\'id\'],
        $toPlaceholder.\'.name\' => $data[\'album\'][\'name\'],
        $toPlaceholder.\'.year\' => isset($data[\'album\'][\'year\']) ? $data[\'album\'][\'year\'] : \'\',
        $toPlaceholder.\'.description\' => $data[\'album\'][\'description\'],
        $toPlaceholder.\'.total\' => $data[\'total\'],
        $toPlaceholder.\'.next\' => $data[\'album\'][\'id\'] + 1,
        $toPlaceholder.\'.prev\' => $data[\'album\'][\'id\'] - 1,
    ));
} else {
    $placeholderPrefix = $modx->getOption(\'placeholderPrefix\',$scriptProperties,\'gallery.\');
    $modx->toPlaceholders(array(
        $placeholderPrefix.\'id\' => $data[\'album\'][\'id\'],
        $placeholderPrefix.\'name\' => $data[\'album\'][\'name\'],
        $placeholderPrefix.\'year\' => isset($data[\'album\'][\'year\']) ? $data[\'album\'][\'year\'] : \'\',
        $placeholderPrefix.\'description\' => $data[\'album\'][\'description\'],
        $placeholderPrefix.\'total\' => $data[\'total\'],
        $placeholderPrefix.\'next\' => $data[\'album\'][\'id\'] + 1,
        $placeholderPrefix.\'prev\' => $data[\'album\'][\'id\'] - 1,
    ));
    return $output;
}
return \'\';',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
    ),
    'modTemplateVar' => 
    array (
      'phone_1' => 
      array (
        'fields' => 
        array (
          'id' => 6,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'phone_1',
          'caption' => '',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'phone_2' => 
      array (
        'fields' => 
        array (
          'id' => 7,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'phone_2',
          'caption' => '',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
  ),
);